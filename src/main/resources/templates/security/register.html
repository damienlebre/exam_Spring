<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Register Page</title>
        <div th:insert="~{fragments/script-styleFragment.html}"></div>
    </head>
    <body>
    <div th:replace="~{fragments/headerFragment :: header}"></div>

        <section class="min-vh-100">

            <h1 class="text-light my-5 ms-3">Créer un compte </h1>

            <div class="container">
                <div class="row">
                    <div class="col-lg-10">

                        <form th:object="${user}"  method="post">

                            <!--afficher les erreurs au dessus du formulaire sous forme de liste-->
                            <div th:if="${#fields.hasAnyErrors()}">

                                <ul>

                                    <li th:each="err: ${#fields.allErrors()}" th:text="${err}" th:value="*{firstname}"></li>

                                </ul>

                            </div>

                            <div th:if="${userExist}"><p>
                                Ce nom d'utilisateur existe déjà...</p>
                            </div>
                            <!--mise en place du token de sécurité  (permet de vérifié que la perosnne qui soumet le formulaire (POST) et bien celle qui en a fait la demande (GET))     -->
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

                            <!--  Les champs du formulaire      -->
                            <!------------------------------Formulaire--------------------------------------->
                            <div class="form-group col-lg-4 col-md-8 col-sm-8">
                                <label class="form-label mt-4"  for="username">Username</label>
                                <input class="form-control" id="username" type="text" th:field="*{username}" th:value="*{username}" />
                                <div th:if="${userExist}">Ce nom d'utilisateur existe déjà...</div>
                            </div>

                            <div class="form-group col-lg-4 col-md-8 col-sm-8">
                                <label class="form-label mt-4"  for="firstname">firstname</label>
                                <input class="form-control" id="firstname" type="text" th:field="*{firstname}" th:value="*{firstname}"/>
                            </div>

                            <div class="form-group col-lg-4 col-md-8 col-sm-8">
                                <label class="form-label mt-4"  for="lastname">lastname</label>
                                <input class="form-control" id="lastname" type="text" th:field="*{lastname}" th:value="*{lastname}"/>
                            </div>

                            <div class="form-group col-lg-4 col-md-8 col-sm-8">
                                <label class="form-label mt-4"  for="password">password</label>
                                <input class="form-control" id="password" type="password" th:field="*{password}" th:value="*{password}"/>
                            </div>

                            <div class="form-group col-lg-4 col-md-8 col-sm-8">
                                <label class="form-label mt-4"  for="confirmPassword">password confirm</label>
                                <input class="form-control" id="confirmPassword" type="password" th:field="*{confirmPassword}"  th:value="*{confirmPassword}"/>
                            </div>

                            <div class="mt-5">
                                <button class="btn btn-outline-primary" type="submit">Valider</button>
                            </div>

                        </form>

                    </div>
                </div>
            </div>

        </section>
    <div th:insert="~{fragments/footerFragment.html}"></div>
    </body>
</html>